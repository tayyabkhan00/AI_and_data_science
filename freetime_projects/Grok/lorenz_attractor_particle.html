<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lorenz Attractor Particles</title>
<style>body { margin:0; background:#000; overflow:hidden; }</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
// Canvas setup
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let w, h;

function resize() {
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

// Lorenz parameters
const sigma = 10;
const rho = 28;
const beta = 8/3;

class Particle {
  constructor() {
    this.reset();
    this.trail = [];
    this.hue = Math.random() * 360;
  }
  reset() {
    // Start near the unstable fixed point
    this.x = 0.1;
    this.y = 0.0;
    this.z = 0.0;
    this.trail = [];
  }
  update(dt) {
    const dx = sigma * (this.y - this.x);
    const dy = this.x * (rho - this.z) - this.y;
    const dz = this.x * this.y - beta * this.z;

    this.x += dx * dt;
    this.y += dy * dt;
    this.z += dz * dt;

    // Project 3D â†’ 2D
    const scale = 8;
    const px = w/2 + this.x * scale;
    const py = h/2 - this.z * scale; // flip Z for nicer view

    this.trail.push({x: px, y: py});
    if (this.trail.length > 150) this.trail.shift();
  }
  draw() {
    if (this.trail.length < 2) return;
    
    ctx.strokeStyle = `hsla(${this.hue}, 100%, 70%, 0.8)`;
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    this.trail.forEach((p, i) => {
      if (i === 0) ctx.moveTo(p.x, p.y);
      else ctx.lineTo(p.x, p.y);
    });
    ctx.stroke();

    // Glow point at head
    ctx.fillStyle = `hsla(${this.hue}, 100%, 90%, 1)`;
    const last = this.trail[this.trail.length-1];
    ctx.beginPath();
    ctx.arc(last.x, last.y, 3, 0, Math.PI*2);
    ctx.fill();
  }
}

const particles = [];
for (let i = 0; i < 12; i++) {
  const p = new Particle();
  p.hue = (i * 30) % 360;
  // Slight random perturbation
  p.x += (Math.random() - 0.5) * 2;
  p.y += (Math.random() - 0.5) * 2;
  particles.push(p);
}

let time = 0;
function animate() {
  ctx.fillStyle = 'rgba(0,0,0,0.05)';
  ctx.fillRect(0, 0, w, h);

  const dt = 0.01;
  particles.forEach(p => {
    p.update(dt);
    p.draw();
  });

  time += dt;
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>