<!DOCTYPE html>
<html>
<head>
<title>Multiple Strange Attractors</title>
<style>body{margin:0;background:#000;overflow:hidden}</style>
</head>
<body>
<canvas id="c"></canvas>
<select id="attractor" style="position:absolute;top:10px;left:10px;z-index:10;padding:10px;font-size:16px;">
  <option value="lorenz">Lorenz</option>
  <option value="aizawa">Aizawa</option>
  <option value="thomas">Thomas Cyclically Symmetric</option>
  <option value="dadras">Dadras</option>
  <option value="rossler">RÃ¶ssler</option>
</select>
<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let width, height;
function resize(){ width=canvas.width=window.innerWidth; height=canvas.height=window.innerHeight; }
resize(); window.addEventListener('resize', resize);

const select = document.getElementById('attractor');
let current = select.value;

class TrailParticle {
  constructor(hue) {
    this.hue = hue;
    this.trail = [];
    this.init();
  }
  init() {
    this.x = this.y = this.z = 0.01;
    this.trail = [];
  }
  update() {
    let dx, dy, dz;
    switch(current) {
      case "lorenz":
        dx = 10*(this.y-this.x);
        dy = this.x*(28-this.z)-this.y;
        dz = this.x*this.y - (8/3)*this.z;
        break;
      case "aizawa":
        const a=0.95,b=0.7,c=0.6,d=3.5,e=0.25,f=0.1;
        dx = (this.z-b)*this.x - d*this.y;
        dy = d*this.x + (this.z-b)*this.y;
        dz = c + a*this.z - this.z**3/3 - (this.x**2 + this.y**2)*(1 + e*this.z) + f*this.z*this.x**3;
        break;
      case "thomas":
        const b_t = 0.208186;
        dx = Math.sin(this.y) - b_t * this.x;
        dy = Math.sin(this.z) - b_t * this.y;
        dz = Math.sin(this.x) - b_t * this.z;
        break;
      case "dadras":
        dx = this.y - 3*this.x + 2.7*this.z - 0.2*this.y*this.z;
        dy = 1.3*this.x + this.y - this.x*this.z;
        dz = 2.4*this.x - 3.6*this.z;
        break;
      case "rossler":
        dx = -this.y - this.z;
        dy = this.x + 0.2*this.y;
        dz = 0.2 + this.z*(this.x - 5.7);
        break;
    }
    const scale = 0.01;
    this.x += dx * scale;
    this.y += dy * scale;
    this.z += dz * scale;

    const px = width/2 + this.x * 15 * (current === "rossler" ? 10 : 20);
    const py = height/2 + this.y * 15 * (current === "rossler" ? 10 : 20);
    this.trail.push({x:px, y:py});
    if(this.trail.length > 300) this.trail.shift();
  }
  draw() {
    ctx.strokeStyle = `hsla(${this.hue},100%,70%,0.9)`;
    ctx.lineWidth = 1;
    ctx.beginPath();
    this.trail.forEach((p,i)=> i===0 ? ctx.moveTo(p.x,p.y) : ctx.lineTo(p.x,p.y));
    ctx.stroke();
  }
}

let particles = [];
function resetParticles() {
  particles = [];
  for(let i=0;i<15;i++){
    const p = new TrailParticle(i*24);
    p.x += Math.random()*2-1;
    particles.push(p);
  }
}
resetParticles();

select.addEventListener('change', e => {
  current = e.target.value;
  resetParticles();
});

function loop(){
  ctx.fillStyle = 'rgba(0,0,0,0.05)';
  ctx.fillRect(0,0,width,height);
  particles.forEach(p=>{ p.update(); p.draw(); });
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>